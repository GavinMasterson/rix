---
title: "z - Developers Vignette: Save the Nix Package Versions data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{z-developers-vignette-save-the-nix-package-versions-data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(rix)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/z-save_r_nix_revs.Rmd: do not edit by hand -->

This vignette is only needed for the developers of `{rix}`.

To install old versions of R, specific Nix revisions must be used. This tool
[Nix Package Versions](https://lazamar.co.uk/nix-versions/) provides a simple
web-interface to look for packages and get their revisions.

It is possible to scrape the table and get the data:


```{r eval = F}
library(rvest)
library(dplyr)
library(janitor)

r_nix_revs <- read_html("https://lazamar.co.uk/nix-versions/?channel=nixpkgs-unstable&package=r") |>
  html_element("table") |>
  html_table() |>
  clean_names() |>
  filter(!grepl("wrapper", version)) |>
  select(-package)

```

This saves the data into the package.

